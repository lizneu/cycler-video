<!DOCTYPE html>
<html>
  <head>
    <title>Video Quiz</title>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <video id="video" width="620" controls>
          <source src="incorrect_technique.mp4" type="video/mp4">
          Your browser does not support HTML5 video.
        </video>
      </div>
      <div class="row">
        <button type="button" id="mistake-btn" class="btn btn-danger">That's a mistake!</button>
      </div>
      <div class="row">
        <p id="mistake-txt" class="notif"></p>
      </div>
    </div>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .row {
        margin: 20px;
        text-align: center;
      }

      .notif {
        max-width: 620px;
        padding: 15px;
        margin: auto;
      }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var mistakeTimesOrig = [
          12,  // incorrect hand wash
          36,  // didn't check pdf
          40,  // touched non sterile area
          47,  // didn't check pdf
          54,  // touched non sterile area
          72,  // touched non sterile area
          147, // touched non sterile area
          148, // incorrect hand rub
          151, // touched non sterile area
          164, // touched non sterile area
          176, // touched cycler
          206, // touched cycle tubing
          230, // touched bag
          265, // mask below nose
          279, // touched non sterile area
          286, // Incorrect Alcavis rub
          293, // Touched transfer set
          294, // Dropped transfer set
          325, // Incorrect hand wash and washed hands before putting mask on
          343, // Touched non sterile area
          347, // Mini cap fell out of package
          356, // 4x4s on counter
          375, // Incorrect Alcavis scrub
          381, // Touch
        ],
        mistakeTimes = mistakeTimesOrig.slice(),
        buffer = 2,
        totalClicks = 0,
        numCorrectClicks = 0;

      var printTime = function() {
        var text = $('#video').prop('currentTime');
        $('#mistake-txt').text(text);
      };

      var classifyClick = function() {
        var time = $('#video').prop('currentTime');
        var correct = false;
        var i;
        for (i = 0; i < mistakeTimes.length; i++) {
          mistakeTime = mistakeTimes[i];
          if (time >= mistakeTime &&
              time <= mistakeTime + buffer) {
            numCorrectClicks++;
            mistakeTimes.splice(i, 1);
            correct = true;
            break;
          }
        }

        if (correct) {
          $('#mistake-txt').text('Correct! That was a mistake!')
            .addClass('bg-success')
            .removeClass('bg-danger');
        } else {
          $('#mistake-txt').text('No, that wasn\'t a mistake')
            .addClass('bg-danger')
            .removeClass('bg-success');
        }
      }

      $(document).ready(function() {
        $('#mistake-btn').click(function() {
          classifyClick();
          totalClicks++;
        });
      });
    </script>
  </body>

</html>